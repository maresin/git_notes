> # Начало работы с Git
> Git представляет собой систему контроля версий (VCS). Он предназнчен для хранения изменений в программном коде проектов и совместной работе над ними.  
> ### Работа с командной строкой
> Основной инструмент работы с Git - это консоль `bash`. Она характерна для OC Linux. При установке ее на Windows устанавливаются также некоторые прочие компонеты Linux. Вот некоторые наиболее часто используемые консольные команды:  
> 
 - `cd` - смена директории
 - `pwd` - печать текущего пути
 - `ls` - просмотр текущей директории (модификатор `-a` позволяет просмотреть также и скрытые файлы и папки)
 - `touch` - создание файла
 - `mkdir` - создание директории
 - `cp` - копирование файла или папки
 - `mv` - перемещение файла или папки (также их переименование)
 - `rm` - удаление файла (модификатор `-r` позволяет удалить папку и ее содержимое)
 - `rmdir` - удаление пустой папки
 - `cat` - просмотр текстового файла  

Пути в консоли прописываются в виде `/home/user/file.txt`. Запись букв диска Windows выглядит`c:/` или `/c/`. Корневая директория с исполняемый файлом `bash` записывается как `/`. Домашняя директория пользователя обозначается `~`, текущая рабочая директория как `./`, а директория на уровень выше `../`. Если в названии директорий и файлов встречаются пробелы - их записывают в кавычках: например,`"folder name"`.  
Команды в консоли не обязательно вводить полностью - например, имена файлов могут быть автоматически дополнены нажатием `Tab`. Повторный ввод команд также не обязателен - их можно вызвать и буфера клавишами со стрелками `Up\Dn`.
Для редактирования файлов можно использовать можно использовать встроенные редакторы - `nano` или `vi`. Вот пример работы в `vi`:

 1. В консоли ввести `vi file.txt`
 2. Для начала редактирование в редакторе ввести `^I`
 3. По окончании редактирования нажать `Esc`
 4. Для записи изменений и и выхода из редактора ввести `:wq`  

 Для прерывания выполнения текущей операции в консоли необходимо нажать `Ctrl+C`

### Создание репозитория Git
Работа с Git начинается с записей в файле конфигурации:
```bash
$ git config --global user.name "John Doe"
$ git config --global user.emal "johndoe@yandex.ru"
```
Это необходимо при совместной работе, чтобы понимать, кто являлся автором изменений. Адрес электронной почты нужен для связи. Стоит указывать адрес, указанный при регистрации в удаленном репозитории (например, на GitHub). Файл конфигурации `.gitconfig` находится в папке с программой Git и его можно просмотреть с помощью:
```bash
$ git config --list
```
Для создания локального репозитория необходимо перейти в папку с файлами проекта. Создание репозитория выполняется командой: 
```bash
$ git init
```
После чего в папке с проектом появится подпапка `.git`со всей служебной информацией. Ее можно принудительно удалить со всеми изменениями:
```bash
$ rm -rf .git
```
Под каждый новый проект создается свой локальный репозиторий в собственной папке.

### Простейшие действия с Git
Для использования файлов в проекте их нужно проиндексировать с помощью команды:
```bash
$ git add file.txt
```
Чтобы добавить всю папку полностью используется:
```bash
$ git add .
```
Это делается и после любых изменений в файле. Затем изменения необходимо сохранить через создание коммита:
```bash
$ git commit -m "Текст комментария"  
```
Отслеживать изменения в репозитории позволяет команда:
```bash
$ git status
```
Просмотреть историю коммитов можно с помощью команды:
```bash
$ git log
```

#### Пример создания и использования Git
```bash
$ cd ~/dev
$ mkdir repo
$ cd repo
$ git init
$ touch README.md
$ git add README.md
$ git commit -m 'Добавить README'
```

### Работа с GitHub
Платформа GitHub предоставляет возможность размещения удаленного репозитория Git. После регистрации нового аккаунта необходимо создать новый репозиций на сайте. Название удаленного репозитория стоит сделать как у локальной папки.  
Для работы с ним необходимо установление защищенного канала передачи данных. Делается это с помощью протокола SSH. Осуществить это можно сгенерировав у себя пару ssh-ключей. Так:
```bash
$ ssh-keygen -t ed25519 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"
```
или так (модификатор `-t` указывает на тип шифрования, для RSA стоит указать битность `-b`):
```bash
$ ssh-keygen -t rsa -b 4096 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"
```
Публичный ключ с расширением `.pub` отправляется на GitHub, а приватный сохраняется в папке пользователя (подпапка `.ssh`). Ключ передается в виде содержимого файла - его можно скопировать в буфер обмена как:
```bash
$ clip < ~/.ssh/id_ed25519.pub
```
После регистрации ssh-ключа на сайте GitHub можно проверить работу связи:
```bash
$ ssh -T git@github.com
```
Привязка удаленного репозитория к локальному выполняется из локальной папки с помощью:
```bash
$ git remote add origin ssh-url
```
Где, ssh-url - это интернет-адрес страницы репозитория в форме SSH (его можно скопировать в GitHub), а origin - дефолтное название удаленного репозитория (при командной работе оказывается, что именно удаленный репозиторий является исходным, а локальный - копией для редактирования) Чтобы убедиться, что репозитории связаны используют:
```bash
$ git remote -v
```
Наконец, для отправки изменений на удаленный репозиторий используется команда:
```bash
$ git push
```
А при первом использовании:
```bash
$ git push -u origin main
```
Где `main` - название основной ветки.

### Отображение информации о коммитах в логах (команда git log)
#### Хеш — идентификатор коммита
Основным идентификатором коммита в Git является хеш, он позволяет узнать автора, дату и содержимое закоммиченных файлов. Хеширование - это преобразование набора данных для получения их "отпечатка". Хеш коммита получается с помощью алгоритма SHA-1 и состоит из цифр 0-9 и латинских букв A-F. Свойства хеша: если дважды получить хеш для одного набора данных, результат будет одинаковым. Если изменить хоть что-то в исходных данных, хеш изменится. Хеши и таблицу _хеш → информация_ о коммите Git сохраняет в служебных файлах в папке `.git`.
#### Полныый и сокращенный логи коммитов
Полный лог содержит описание коммита: хеш, автор, дата, сообщение. Сокращенный лог коммита только с хешами и комментариями выводится командой:
```bash
$ git log --oneline
```
Сокращенный лог помогает быстро найти нужный коммит среди множества. В нем используется сокращенный хэш и он также одназначно помогает идентифицировать коммит как и полный.
#### Указатель HEAD
В логе коммитов в самомо верху можно увидеть запись HEAD -> main. Она указывает на последний коммит в системе Git. HEAD - это еще и файл, который находится в папке `.git`. Для проверки содержимого файла HEAD можно использовать команду `cat`. Внутри него находится ссылка на служебный файл `refs/heads/master`, содержащий хеш последнего коммита - ее также можно просмотреть командой `cat`.
При работе с Git указатель HEAD используется часто, его можно использовать вместо хеша последнего коммита для его идентификации.

### Статусы файлов в Git (команда git status)
В Git файлы могут находиться в разных состояниях: _untracked, staged, modified, tracked_.
- _Untracked:_ новые файлы, не отслеживаемые Git.
- _Staged:_ файлы после git add, в списке для коммита.
- _Modified:_ файлы с изменениями относительно последней версии в _staging_.
- _Tracked:_ файлы, отслеживаемые Git, включая фиксированные и добавленные в _staging_.  

Типичный жизненный цикл файла: создание, изменение, добавление в _staging_, коммит, изменение, добавление в _staging_, коммит.
```mermaid
graph LR;
untracked\modified -- "git add" --> staged --"git commit" --> commited\tracked;
```

### Оформление записей коммитов
Есть общие рекомендации по тому, как правильно составить сообщение коммита. Оно должно быть:
- относительно коротким, чтобы его было легко прочитать;
- информативным.  

Так как сокращенный лог `git log --oneline` позволяет выводить не более 72 символов, длину сообщения желательно ограничить этой длиной.  
Для сообщений на русском языке часто рекомендуют использовать инфинитивы. Например: "Добавить тесты для PipkaService", "Исправить ошибку #123" и так далее. Для сообщений на английском рекомендуется использовать повелительное наклонение Например: "Use library mega_lib_300", "Fix exit button" и так далее.  
При совметстной работе над проектом оговаривается общий стиль написания сообщений коммитов. Ниже несколько популярных подходов к оформлению сообщений коммитов.
#### Корпоративный стиль
Во многих компаниях применяется Jira — система для организации проектов и задач. У каждой задачи в Jira есть идентификатор из нескольких заглавных латинских букв и номера. Например, LGS-239 значит, что это 239-я задача в проекте LGS (сокращение от англ. logistics — «логистика»).
В корпоративном стиле в начале сообщения обычно указывают Jira-ID, а после — текст сообщения.
```bash
$ git commit -m "LGS-239: Дополнить список пасхалок новыми числами"
```
#### Стандарт Conventional Commits
Conventional Commits предлагает такой формат коммита: `<type>: <сообщение>`. Первая часть `type` — это тип изменений. Таких типов достаточно много. Вот два примера:  
- `feat` — для новой функциональности;
- `fix` — для исправленных ошибок.
```bash
git commit -m "feat: добавить подсчёт суммы заказов за неделю"
```
#### GitHub-стиль
GitHub можно использовать не только для хранения файлов проекта, но и для ведения списка задач (англ. issue) этого проекта. Если коммит «закрывает» или «решает» какую-то задачу, то в его сообщении удобно указывать ссылку на неё. Для этого в любом месте сообщения нужно указать `#<номер задачи>`. Например, вот так:
```bash
$ git commit -m "Исправить #334, добавить график температуры"
```